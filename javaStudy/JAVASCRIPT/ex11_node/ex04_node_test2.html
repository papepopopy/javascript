<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>노드 추가/삽입</title>
</head>
<body>
    <h3>부모노드에 자식 요소 추가!</h3>
    <hr>
    <div class="form">
        <label for="">항복내용 <input type="text" placeholder="과일명 입력" id="name" value="딸기">
        </label>
        <button id="add">확인</button>
        <button id="remove">삭제</button>
    </div>
    <hr>
    <h3>좋아하는 과일 List</h3>
    <div>
        <ul class="list">
            <li>포도</li>
            <li>포도</li>
        </ul>
    </div>
    <hr>
    <h3>노드 앞 또는 뒤에 추가!</h3>
    <div class="currNode">현재 노드</div>

    <script>
        const name = document.querySelector("#name")
        // console.log(name, name.value)

        const addBtn = document.querySelector("#add")
        // console.log(addBtn)

        const ul_list = document.querySelector(".list")
        const removeBtn = document.querySelector("#remove")

        // 처음 로딩된 시점의 list 상태
        const ul_list_item = document.querySelectorAll(".list li")
        console.log(ul_list_item)
        
        // const prevNext = document.querySelector('li')
        
        
        // for(let item of ul_list_item){
        //     console.log(item)
        // }

        // 항목에서 클릭하여 직접 삭제
        itemsView() //호출
        
        // List 항목 표시
        function itemsView() {
            ul_list_item.forEach ((item) => {
                console.log(item)
                
                item.addEventListener("click", () => {
                    alert(item.innerText)

                    // ul_list_item.removeChild(item)

                    item.remove(item)
                })
            })
        }

        // 삭제버튼 이벤트 핸들러

        removeBtn.addEventListener("click", () => {
            console.log("remove")
            // 부모노드 .hasChildNodes() : 자식노드 존재여부 확인
            
            // 삭제할 list항목, 개수 가져오기
            const item_list = document.querySelectorAll(".list li") // 항목
            const isZero = item_list.length //항목 수

            if (isZero > 0) {
                // 부모요소 안 자식요소 삭제 : 부모노드.removeChild(삭제하고자하는 자식노드)
                
                // 키워드를 입력한 항목이 list항목에 있으면 가져오기
                item_list.forEach((item) => {
                    // console.log(item, name.value)
                    let itemName = item.innerText
                    // 삭제할 내용과 list item 내용이 동일한 경우: 삭제대상
                    if (itemName == name.value.trim()) {
                        console.log(item)

                        ul_list.removeChild(item)
                    }
                })
            } else {
                alert("삭제할 항목이 없습니다.")
            }
        })

        // const item_list = document.querySelectorAll(".list li")
        // const isZero = item_list.length

        // const test = document.querySelector("#list_item1")
        // console.log(isZero)
        // console.log(test)
        // removeBtn.addEventListener("click", () => {
            // if (isZero > 0) {
            //     item_list.forEach((item) => {
            //         // console.log(item, name.value)
            //         // console.log(itemName)
            //         let itemName = item.innerText
            //         if (itemName == name.value.trim()) {
            //             console.log(item)

            //             ul_list.removeChild(item)
            //         }
            //     })
            // } else {
            //     console.log("거짓")
            // }
        // })

        
        // 추가버튼에 클릭 이벤트 핸들러

        addBtn.addEventListener("click", () => {
            // alert("add")
            let value = name.value.trim()
            // console.log(value.length)
            // console.log(value.trim().length)
            // alert(value.trim())

            // li 요소 생성
            const liElement = document.createElement("li")
            liElement.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center")
            liElement.innerHTML = inputValue + "" + '<span  class="btn-close" ></span>'

            if (list.childElementCount > 0) {
                list.firstElementChild.before(liElement)
            }   else {
                list.appendChild(liElement)
            }
            itemContent.value = ""
            itemContent.focus()

            itemContent.addEventListener("keyup", (e) => {
                if(e, keyCode == 13) {
                    inputvalue = itemContent.value.trim()
                    addButton.focus()
                }
            })

            // li요소의 내용
            liElement.innerHTML = value
            // console.log(liElement)
            
            // 부모요소에 자식요소 추가하기 : appendChild(), 마지막 위치에 추가
            ul_list.appendChild(liElement)

            // 지정 위치에 요소 추가하기
            // ul_list.insertBefore(liElement, ul_list.firstElementChild) // 첫번째 위치에 추가

            // prevNext.before(liElement)
            // prevNext.after(liElement)
            // ul_list.firstElementChild.before(liElement)

            // 첫째 요소 앞
            ul_list.firstElementChild.before(liElement)

            // 두번째 요소 뒤-
            // ul_list.firstElementChild.after(liElement)
        })

        // input text에 키 누름 이벤트 핸들러
        name.addEventListener("keyup", (e) => {
            // console.log(e.keyCode)

            if(e.keyCode == 13) { //13 = Enter
                addBtn.focus() // 버튼 위치로 이동
            }
        })

    </script>
</body>
</html>