<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>여행 준비물 점검 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      .input_box {
        margin: 0 auto;
        width: 700px;
        padding: 40px;
        border: 1px solid #333;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="input_box">
        <h1>여행 준비물 점검 목록</h1>
        
        <!-- <div class="input-group mb-3">
          <input id="content" type="text" class="form-control" placeholder="추가할 내용" aria-label="Recipient's username" aria-describedby="addBtn">
          <button class="btn btn-outline-secondary" type="button" id="addBtn">추가</button>
        </div> -->
        <div class="input-group mb-3 ">
          <input type="text" id="content"class="form-control" placeholder="추가할 내용" aria-label="Recipient's username" aria-describedby="addBtn">
          <button class="btn btn-outline-secondary" type="button" id="addBtn">추가</button>
        </div>

        <ul class="list-group list">
          <!-- <li class="list-group-item d-flex justify-content-between align-items-start">
            A list item 01
            <span class="btn-close"></span>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-start">
            A list item 02
            <span class="btn-close"></span>
          </li> -->
        </ul>

      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- <script>
      var itemContent = document.querySelector('#content')
      var addButton = document.querySelector('#addBtn')
      //console.log(itemContent, addButton)

      var list = document.querySelector('.list')
      var list_item = document.querySelectorAll('.list li')
      //var list_item = list.children // 자식요소 추출
      console.log('list: ', list)
      console.log('list_item: ', list_item)

      var inputValue = ''

      //var arrList = [...list_item]// 유사배열->배열: .map(), .filter() .find() 사용시 적용
      //list_item.forEach((data)=>console.log('data:',data))

      // li list항목 초기상태 표시
      listView()
      function listView() {
        console.log("listView:",list_item)

        // 초기 li 항목에 click이벤트 처리
        list_item.forEach((li)=>{
          console.log('data:',li)
          // 부모노드.children =>자식노드 전체추출
          // 부모노드.children[index] => 특정 위치에 있는 자식노드추출

          // li노드 자식인 span에 이벤트 등록
          li.children[0].addEventListener('click', (e)=>{
            //console.log(e.target.)
            console.log(li.innerHTML)
            li.remove() // li노드 삭제
          })

        })

      }// end listView()

      // 추가버튼
      addButton.addEventListener('click',()=>{
        console.log('add click')

        // text input에서 데이터 읽기
        inputValue = itemContent.value.trim()
        console.log(inputValue)
        
        if (inputValue == "" || !inputValue) {
          alert('추가할 내용이 없습니다.')
          itemContent.focus() // 커서의 위치는 입력란에 설정
          return
        }

        // 비어 있지 않으면 수행
        // li 요소 생성
        const liElement = document.createElement('li') 
        // li 요소 class 추가
        liElement.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center")
        // li 요소 텍스트및 자식 요소 추가
        liElement.innerHTML = inputValue +" "+ 
                             '<span  class="btn-close" ></span>'
        //console.log("create li: ",liElement)
        //console.log("child cnt: ",list.childElementCount)

        if (list.childElementCount > 0 ){// 자식노드 1개이상
          // 생성된 li요소를 특정 위치 배치
          //list.firstElementChild.after(liElement)
          list.firstElementChild.before(liElement)
        }  else {// 자식노드 0개일 경우
          list.appendChild(liElement)
        }// end if
        // 추가 후, 입력란 초기화
        itemContent.value = ""
        itemContent.focus()

        // update관계로 다시 읽어오기

        list_item = document.querySelectorAll('.list li')
        var list_item2 = [...list_item]
        list_item2.forEach((li)=>{
          //console.log("=>",li)
          li.children[0].addEventListener('click', (e)=>{
            //console.log(e.target.)
            console.log(li.innerHTML)
            li.remove() // li노드 삭제`
          })
        })
      

      })  //end  addButton


      // Enter키 처리
      itemContent.addEventListener('keyup', (e)=>{
        //console.log(itemContent.value)
        //console.log(e.keyCode)// 13(Enter)
        
        if (e.keyCode == 13) {
          inputValue = itemContent.value.trim()
          addButton.focus()
        }



      })
    </script> -->
    <script>

      // 텍스트 칸과 추가 버튼 연결
      var itemContent = document.querySelector("#content")
      var addButton = document.querySelector("#addBtn")
      // console.log(itemContent,addButton)


      // 추가되어진 ul li 메뉴들 연결
      var list = document.querySelector(".list")
      var list_item = document.querySelectorAll(".list li")

      var inputValue = ""

      //////////////////////////////////////////////////////

      // listView 실행

      listView()
      function listView() {
        // 추가되어진 li 클릭 이벤트 추가
        list_item.forEach((li) => {
          list.children[0].addEventListener("click", (e) => {
            // span 태그를 누를 시 해당 리스트가 사라지도록
            li.remove()
          })
        })
      }

      //////////////////////////////////////////////////////
      
      // 추가버튼 
      addButton.addEventListener('click',()=>{
        console.log('add click')
        inputValue = itemContent.value.trim() // 추가할 내용 값 = inputValue

        if (inputValue == "" || !inputValue) {
          // 값이 없는 경우
          alert("추가할 내용이 없습니다.")
          itemContent.focus() //커서 위치 이동 
          return
        }
        
        // 값이 있는 경우
        // li 요소와 class 추가
        const liElement = document.createElement("li") // li 요소 생성
        //style 및 btn 태그 추가
        liElement.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center")
        liElement.innerHTML = inputValue + " " +'<span class = "btn-close"></span>'

        if (list .childElementCount > 0) { // li가 1개 이상 남아있을때!
          list.firstElementChild.before(liElement)
        } else { // li가 0개 이하로 남아있을때!
          list.appendChild(liElement) //appendChild는 마지막 자식요소에 붙임
        }
        
        itemContent.value = "" // 리스트 값 
        itemContent.focus()

        // update관계로 되돌려오기.
        list_item = document.querySelectorAll(".list li")
        var list_item2 = [...list_item]
        list_item2.forEach((li) => {
          li.children[0].addEventListener("click", (e) => {
            console.log(li.innerHTML)
            li.remove()
          })
        })
      })

      // enter키 클릭시
      itemContent.addEventListener("keyup", (e) => {
        if(e.keyCode == 13) {
          inputValue = itemContent.value.trim()
          addButton.focus()
        }
      })
    </script>
  </body>
</html>